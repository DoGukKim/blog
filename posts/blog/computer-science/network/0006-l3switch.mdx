---
description: 'L3 스위치와 라우터의 개념, 동작 원리에 대해 알아보자!'
date: 2022-09-14 14:03:54
publish: true
tags: ['computer-science', 'network']
title: 'L3 스위치와 라우터'
thumbnail: ''
---

## 라우터와 L3 스위치

`라우터`는 소프트웨어이며 `스위치`와 결합되어 함께 동작하는 스위치를 L3 스위치라 한다.  
L3 스위치는 하위 레이어 기능을 포함하고 있기 때문에 IP, MAC 주소 모두 이해할 수 있다.  
따라서 프레임 데이터가 오면 2계층 헤더에 도착지 MAC을 확인하고 매핑되지 않을 경우 드랍한다.  
매핑이 될 경우 디캡슐레이션을 통해 3계층 도착지 IP를 확인하고 매핑되지 않을 경우 드랍한다.  
라우터는 인캡슐레이션을 통해 2계층 헤더를 다시 생성하는데 이때 목적지 MAC 주소가 다음 라우터로 전환된다.

<Space />

## 라우팅

라우터가 경로 설정하는 기능을 말한다. EndPoint 간 경로를 모두 책임지는 것이 아닌 인접한 라우터까지만  
경로를 지정하고 라우터 간에 최적의 경로를 학습해 포워딩 한다.  
이를 `홉 바이 홉` 라우팅이라 하며 인접한 라우터를 `넥스트 홉`이라 한다.  
라우터는 쓸모 없는 패킷이 돌아다니며 대역폭을 낭비하는 것(루프)을 방지하기 위해 `TTL`를 통해  
네트워크에 살아 있을 수 있는 시간을 제한한다. 값이 1씩 줄며 0이되면 네트워크에서 버려진다.

<Space />

## 라우팅 테이블

라우터는 최적의 경로를 학습해 `라우팅 테이블`에 정보를 저장한다.  
목적지 IP, 인터페이스, 넥스트 홉, 에이징 타임 등의 정보가 저장되고 이를 참조해 스위칭이 발생한다.

<Space />

## 최적의 경로 학습

라우터가 최적의 경로를 학습하는데 있어 OSPF, BGP, RIP 등 다양한 프로토콜을 사용할 수 있다.  
간단한 `RIP(Routing Information Protocol)` 프로토콜을 예로,  
`홉(라우터)` 간에 `거리`에 대한 정보를 주고 받아 라우팅 테이블에 저장한다.  
이를 기반으로 패킷을 전송할 때 `최단(최적) 거리`의 목적지를 찾아 전송할 수 있게 된다.  
단점으로 거리에 대한 정보를 주고 받을 때 약간의 시간이 소모된다.

<Space />

## 브로드캐스트 컨트롤

라우터는 분명한 목적지가 있을 경우에만 포워딩하기 때문에 브로드캐스트, 멀티캐스트을 전달하지 않는다.  
이를 통해 브로드캐스트 스톰을 예방(루프)할 수 있으며, 다른 네트워크로 전파되는 것을 막을 수 있다.

<Space />

## 참조

[IT 엔지니어를 위한 네트워크 입문 - 길벗](https://product.kyobobook.co.kr/detail/S000001834493)  
[IT BEST-PATH - Layer 3 Switch vs. Router](https://www.youtube.com/watch?v=KA4-z6mBQxI)
